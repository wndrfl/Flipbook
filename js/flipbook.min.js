(function(e,t,n,r){function o(t,n){this.element=t;this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i="flipbook",s={backgroundColor:"transparent",backgroundPosition:"center",resizeContainerToImage:false,wallpaperMode:"contain"};o.prototype.init=function(){var t=this;this.currentFrame=0;this.currentNotch=null;this.currentX=null;this.parentElement=e(this.element);this.images={};this.isMobile=/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent);this.notchInterval=5;this.prevX=null;switch(this.options.wallpaperMode){case"contain":this.options.backgroundPosition="center";this.options.backgroundSize="contain";break;case"crop":this.options.backgroundPosition="center";this.options.backgroundSize="cover";break}this.parentElement.css({"background-color":this.options.backgroundColor,"background-position":this.options.backgroundPosition,"background-repeat":"no-repeat","background-size":this.options.backgroundSize,cursor:"col-resize",resizeToImage:this.options.resizeToImage});if(this.options.images.length==0){return}this.preloadImages(this.options.images,function(){if(t.options.resizeToImage){t.parentElement.css({height:t.images[t.currentFrame].height,width:t.images[t.currentFrame].width})}t.showImage();if(t.isMobile){t.parentElement.mousedown(function(){t.bindMouse()}).mouseup(function(){t.unBindMouse()})}else{t.parentElement.hover(function(){t.bindMouse()},function(){t.unBindMouse()})}})};o.prototype.preloadImages=function(t,n){var t=t.slice(0);var r=this;e(t).each(function(i,s){e("<img>").attr({src:this}).load(function(){r.images[i]={height:this.height,src:this.src,width:this.width};t.splice(t.indexOf(s),1);if(t.length==0){n()}})})};o.prototype.bindMouse=function(){var e=this;this.parentElement.bind("mousemove",function(t){e.prevX=e.currentX;e.currentX=t.clientX;if(!e.currentNotch){e.currentNotch=e.currentX}else{if(e.currentX>e.prevX){if(e.currentX>=e.currentNotch+e.notchInterval){e.currentNotch=e.currentX;e.showNextImage()}}else{if(e.currentX<=e.currentNotch-e.notchInterval){e.currentNotch=e.currentX;e.showPrevImage()}}}})};o.prototype.showImage=function(e){if(!e){e=0}this.parentElement.css({"background-image":"url('"+this.options.images[e]+"')"})};o.prototype.showNextImage=function(){if(++this.currentFrame>=Object.keys(this.images).length){this.currentFrame=0}this.showImage(this.currentFrame)};o.prototype.showPrevImage=function(){if(this.currentFrame--<=0){this.currentFrame=Object.keys(this.images).length-1}this.showImage(this.currentFrame)};o.prototype.unBindMouse=function(){this.parentElement.unbind("mousemove");this.currentX=null;this.currentNotch=null;this.prevX=null};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}})(jQuery,window,document)